#!/bin/bash

# 1. ç¯å¢ƒæ¸…ç†ï¼šç¡®ä¿æ²¡æœ‰æ®‹ç•™è¿›ç¨‹å ç”¨ç«¯å£
pkill -f "openclaw" > /dev/null 2>&1

echo "================================================"
echo "          OpenClaw Termux è¿è¡Œå¼•å¯¼          "
echo "================================================"

# 2. ç›´æ¥æ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤ï¼ˆåˆ©ç”¨å…¶è‡ªå¸¦çš„æ£€æŸ¥æœºåˆ¶ï¼‰
echo "ğŸ‘‰ æ­£åœ¨æ‰§è¡Œåˆå§‹åŒ–æ£€æŸ¥..."
openclaw onboard

echo ""
echo "ğŸ‘‰ æ­£åœ¨å¯åŠ¨ Dashboard ä»¥è·å–ç»‘å®šé“¾æ¥..."
echo "------------------------------------------------"
echo "âš ï¸  è¯·åœ¨ä¸‹æ–¹è¾“å‡ºä¸­å¯»æ‰¾åŒ…å« 'token=' çš„é“¾æ¥å¹¶å¤åˆ¶"
echo "------------------------------------------------"
sleep 2

# 3. åå°å¯åŠ¨ Dashboardï¼Œæ—¥å¿—ç›´æ¥è¾“å‡ºåˆ°å½“å‰ç»ˆç«¯å±å¹•
openclaw dashboard --no-open &
DASH_PID=$!

# 4. é˜»å¡è„šæœ¬ï¼Œç­‰å¾…ç”¨æˆ·å®Œæˆå¤åˆ¶æ“ä½œ
echo ""
read -p "âœ… å¤åˆ¶å®Œæˆåï¼Œè¯·æŒ‰ [Enter] å›è½¦é”®ï¼šå…³é—­é¢æ¿å¹¶å¯åŠ¨ç½‘å…³..."

# 5. å…³é—­ Dashboard è¿›ç¨‹
kill $DASH_PID > /dev/null 2>&1
echo ""
echo "------------------------------------------------"
echo "ğŸ†— Dashboard å·²å…³é—­ï¼Œæ­£åœ¨å¯åŠ¨ Gateway (Verbose)..."
echo "------------------------------------------------"
sleep 1

# 6. è¿›å…¥ç½‘å…³æ¨¡å¼
openclaw gateway --verbose
