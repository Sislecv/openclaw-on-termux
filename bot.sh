#!/bin/bash

# 1. æ¸…ç†å¯èƒ½æ®‹ç•™çš„æ—§è¿›ç¨‹
pkill -f "openclaw" > /dev/null 2>&1

echo "------------------------------------------------"
echo "ğŸš€ æ­£åœ¨å¯åŠ¨ Dashboardï¼Œè¯·æ³¨æ„å¯»æ‰¾åŒ…å« 'token=' çš„é“¾æ¥"
echo "------------------------------------------------"
sleep 1

# 2. åœ¨åå°å¯åŠ¨ Dashboardï¼Œä½†ã€ä¸é‡å®šå‘æ—¥å¿—ã€‘
# è¿™æ ·å®ƒçš„è¾“å‡ºä¼šç›´æ¥æ˜¾ç¤ºåœ¨å½“å‰çš„ç»ˆç«¯å±å¹•ä¸Š
openclaw dashboard --no-open & 

# è®°å½•å®ƒçš„è¿›ç¨‹ ID (PID)
DASH_PID=$!

# 3. åœåœ¨è¿™é‡Œç­‰å¾…ç”¨æˆ·æ“ä½œ
echo ""
echo "ğŸ‘‰ è¯·åœ¨ä¸Šæ–¹å†…å®¹ä¸­æ‰¾åˆ°é“¾æ¥å¹¶å¤åˆ¶ã€‚"
read -p "âœ… å¤åˆ¶å®Œæˆåï¼Œè¯·æŒ‰ [Enter] å›è½¦é”®ï¼šå…³é—­é¢æ¿å¹¶å¯åŠ¨ç½‘å…³..."

# 4. æ€æ­»é¢æ¿è¿›ç¨‹
kill $DASH_PID > /dev/null 2>&1
echo "------------------------------------------------"
echo "å·²å…³é—­ Dashboard è¿›ç¨‹ï¼Œæ­£åœ¨åˆ‡æ¢åˆ° Gateway..."
echo "------------------------------------------------"

# 5. å¯åŠ¨ Gateway
openclaw gateway --verbose
